name: Context Variables
on: [workflow_dispatch]
env:
 env_var: ${{ vars.MESSAGE_REPO }}
 job_switches: ${{ toJson('["push", "pull_request"]') }}
 
jobs:    
    build:
      name: Run Script
      runs-on: ubuntu-latest
      environment: development
      steps:
        - uses: actions/checkout@v1
        - name: Script using  repo variable
        #  run: .\script.ps1 -Parameter1 ${{ env.env_var }}
          run: .\script.ps1 -Parameter1 ${{ env['env_var'] }}
          shell: pwsh
        - name: Script using Environment variable
          run: .\script.ps1 -Parameter1 ${{ vars.MESSAGE }}
          shell: pwsh
        - name: Testing eco of repo  variables
          run: |
           echo "variable from shell environment : $env_var"
    publish:
     # if: "!contains($job_switches, '[push]')"
      needs: build
      name: Publish Script
      runs-on: ubuntu-latest
      steps:
        - name: Testing eco of repo  variables
          run: |
           echo contains($job_switches, '[push]')
